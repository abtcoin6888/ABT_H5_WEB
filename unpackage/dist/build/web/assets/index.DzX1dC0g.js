import{al as a,ap as r,af as o,ae as e,as as s,aQ as l,aR as i,aw as t,ah as n,aj as c,aJ as d,az as u,v,am as g,aE as f,an as p,U as h,bg as m,b2 as b,I as y,aD as S,F as w,bh as z,aS as L}from"./index-CvJkP8r7.js";const[x,I]=a("image");const j=S(r({name:x,props:{src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:g,height:g,radius:g,lazyLoad:Boolean,iconSize:g,showError:f,errorIcon:p("photo-fail"),iconPrefix:String,showLoading:f,loadingIcon:p("photo"),crossorigin:String,referrerpolicy:String},emits:["load","error"],setup(a,{emit:r,slots:g}){const f=o(!1),p=o(!0),S=o(),{$Lazyload:w}=e().proxy,z=s((()=>{const r={width:l(a.width),height:l(a.height)};return i(a.radius)&&(r.overflow="hidden",r.borderRadius=l(a.radius)),r}));t((()=>a.src),(()=>{f.value=!1,p.value=!0}));const L=a=>{p.value&&(p.value=!1,r("load",a))},x=()=>{const a=new Event("load");Object.defineProperty(a,"target",{value:S.value,enumerable:!0}),L(a)},j=a=>{f.value=!0,p.value=!1,r("error",a)},E=(r,o,e)=>e?e():v(y,{name:r,size:a.iconSize,class:o,classPrefix:a.iconPrefix},null),P=()=>{if(f.value||!a.src)return;const r={alt:a.alt,class:I("img"),style:{objectFit:a.fit,objectPosition:a.position},crossorigin:a.crossorigin,referrerpolicy:a.referrerpolicy};return a.lazyLoad?h(v("img",b({ref:S},r),null),[[m("lazy"),a.src]]):v("img",b({ref:S,src:a.src,onLoad:L,onError:j},r),null)},$=({el:a})=>{const r=()=>{a===S.value&&p.value&&x()};S.value?r():u(r)},B=({el:a})=>{a!==S.value||f.value||j()};return w&&n&&(w.$on("loaded",$),w.$on("error",B),c((()=>{w.$off("loaded",$),w.$off("error",B)}))),d((()=>{u((()=>{var r;(null==(r=S.value)?void 0:r.complete)&&!a.lazyLoad&&x()}))})),()=>{var r;return v("div",{class:I({round:a.round,block:a.block}),style:z.value},[P(),p.value&&a.showLoading?v("div",{class:I("loading")},[E(a.loadingIcon,I("loading-icon"),g.loading)]):f.value&&a.showError?v("div",{class:I("error")},[E(a.errorIcon,I("error-icon"),g.error)]):void 0,null==(r=g.default)?void 0:r.call(g)])}}})),[E,P]=a("cell-group");const $=S(r({name:E,inheritAttrs:!1,props:{title:String,inset:Boolean,border:f},setup(a,{slots:r,attrs:o}){const e=()=>{var e;return v("div",b({class:[P({inset:a.inset}),{[L]:a.border&&!a.inset}]},o,z()),[null==(e=r.default)?void 0:e.call(r)])};return()=>a.title||r.title?v(w,null,[v("div",{class:P("title",{inset:a.inset})},[r.title?r.title():a.title]),e()]):e()}}));export{$ as C,j as I};

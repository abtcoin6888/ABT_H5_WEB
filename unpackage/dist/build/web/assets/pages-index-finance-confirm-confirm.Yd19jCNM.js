import{a as t,N as a,f as e,bM as i,r as n,q as s,w as o,t as l,u as c,v as r,x as u,z as f,y as d,E as m,D as _,H as h,W as p,G as g,J as y}from"./index-CvJkP8r7.js";import{_ as b}from"./fui-icon.BbrID5X2.js";import{r as k}from"./uni-app.es.4grYzir1.js";import{_ as w}from"./fui-nav-bar.CZAK61wT.js";import{_ as $}from"./uni-steps.DX255aXO.js";import{_ as v}from"./uni-popup.BKNKbknm.js";import{f as x}from"./financing.C5EyzPF8.js";import{_ as j}from"./check-s.DGG9M_rm.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.BVKa2lKV.js";const D=C({components:{fuiNavBar:w},data:()=>({active:0,amount:"",list2:[],checked:!1,item:{name:"",buy_currency:{},pay_currency:{}},pre_income:"--"}),watch:{amount:function(t){this.pre_income=this.$util.thousandSeparator(this.amount*this.item.eay/100)}},onLoad(t){this.id=t.id},mounted(){this.getDetail()},computed:{...t(["userTheme"])},onReady(){this.list2.push({title:this.$t("financing.t46"),desc:"-"}),this.list2.push({title:this.$t("financing.t47"),desc:"-"}),this.list2.push({title:this.$t("financing.t48"),desc:"-"})},onShow(){},methods:{scroll(t){this.scrollTop=t.detail.scrollTop},async getDetail(){let t=await x.detail({id:this.id});this.list2[0].desc=a.getDateStr(),this.list2[1].desc=a.getDateAddDay(this.list2[0].desc,1),this.list2[2].desc=a.getDateAddDay(this.list2[0].desc,t.data.time_limit),t.data.remaining=a.thousandSeparator(t.data.remaining),t.data.show_user_remaining=a.thousandSeparator(t.data.user_remaining),t.data.show_user_balance=a.thousandSeparator(t.data.user_balance,2),t.data.user_balance=parseFloat(t.data.user_balance),t.data.user_remaining=parseFloat(t.data.user_remaining),this.item=t.data},auto(t){t.detail.value&&this.$refs.autobut.open()},maxBuy(){this.amount=this.item.user_remaining},async apply(){if(!this.checked)return;if(this.amount<parseFloat(this.item.min_buy))return void e({icon:"none",title:this.$t("financing.t26")+" "+this.item.min_buy+" "+this.item.buy_currency.symbol});if(this.amount>parseFloat(this.item.user_remaining))return 0==parseFloat(this.item.user_remaining)?void e({icon:"none",title:this.$t("financing.t27")}):void e({icon:"none",title:this.$t("financing.t27")+this.item.user_remaining+" "+this.item.buy_currency.symbol});200==(await x.apply({financing_product_id:this.id,amount:this.amount})).code&&i({url:"/pages/index/finance/confirm/result?symbol="+this.item.buy_currency.symbol+"&amount="+this.amount+"&start_at="+this.list2[1].desc+"&end_at="+this.list2[2].desc})}}},[["render",function(t,a,e,i,x,C){const D=k(n("fui-icon"),b),S=k(n("fui-nav-bar"),w),F=h,T=l,z=p,B=k(n("uni-steps"),$),V=g,A=y,L=k(n("uni-popup"),v);return c(),s(T,{class:"confirmPage","data-theme":t.userTheme},{default:o((()=>[r(S,{isFixed:"",isOccupy:"",statusBar:"",background:"var(--background-primary)",color:"var(--content-primary)",title:x.item.name,onLeftClick:a[0]||(a[0]=a=>t.$mroute.back())},{default:o((()=>[r(D,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),r(T,{class:"container"},{default:o((()=>[r(T,{class:"container-cell flex align-center justify-between"},{default:o((()=>[r(F,{class:"font-13 color-gray"},{default:o((()=>[u(f(t.$t("financing.t8")),1)])),_:1}),r(F,{class:"font-13 color-black font-weight"},{default:o((()=>[u(f(x.item.time_limit)+f(t.$t("financing.t10")),1)])),_:1})])),_:1}),r(T,{class:"container-cell flex flex-column"},{default:o((()=>[r(F,{class:"font-13 color-gray"},{default:o((()=>[u(f(t.$t("financing.t4")),1)])),_:1}),r(T,{class:"container-cell-input"},{default:o((()=>[r(z,{type:"number",modelValue:x.amount,"onUpdate:modelValue":a[1]||(a[1]=t=>x.amount=t),placeholder:t.$t("financing.t40"),class:"font-13 color-black"},null,8,["modelValue","placeholder"]),r(T,{class:"flex align-center input_right"},{default:o((()=>[r(F,{class:"font-12 color-black"},{default:o((()=>[u(f(x.item.buy_currency.symbol),1)])),_:1}),r(F,{class:"line"}),r(T,{onClick:a[2]||(a[2]=a=>x.amount=t.$util.str2number(x.item.show_user_balance))},{default:o((()=>[r(F,{class:"font-12 font-weight color-primary"},{default:o((()=>[u(f(t.$t("financing.t36")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(T,{class:"container-cell flex align-center justify-between"},{default:o((()=>[r(F,{class:"font-13 color-gray"},{default:o((()=>[u(f(t.$t("financing.t37")),1)])),_:1}),r(T,{class:"flex align-center"},{default:o((()=>[r(F,{class:"font-13 font-weight color-black"},{default:o((()=>[u(f(x.item.show_user_balance)+" "+f(x.item.buy_currency.symbol),1)])),_:1}),x.item.show_user_balance<=0?(c(),s(T,{key:0,onClick:a[3]||(a[3]=a=>t.$mroute.exchange())},{default:o((()=>[r(F,{class:"font-13 font-weight color-primary pl-10"},{default:o((()=>[u(f(t.$t("bbox.t10")),1)])),_:1})])),_:1})):d("",!0)])),_:1})])),_:1}),r(T,{class:"container-cell flex align-center justify-between"},{default:o((()=>[r(T,{class:"flex align-center"},{default:o((()=>[r(F,{class:"font-13 color-gray mr-5"},{default:o((()=>[u(f(t.$t("financing.t38")),1)])),_:1}),r(D,{onClick:a[4]||(a[4]=a=>t.$refs.notice.open()),name:"help-fill",size:"34",color:"var(--content-tertiary)"})])),_:1}),r(F,{class:"font-13 font-weight color-black"},{default:o((()=>[u(f(x.item.show_user_remaining)+" "+f(x.item.buy_currency.symbol),1)])),_:1})])),_:1}),r(T,{class:"container-cell flex align-center justify-between"},{default:o((()=>[r(F,{class:"font-13 color-gray"},{default:o((()=>[u(f(t.$t("financing.t39")),1)])),_:1}),r(F,{class:"font-13 font-weight color-black"},{default:o((()=>[u(f(x.item.remaining)+" "+f(x.item.buy_currency.symbol),1)])),_:1})])),_:1}),r(T,{class:"container-card"},{default:o((()=>[r(T,{class:"container-card-box"},{default:o((()=>[r(B,{options:x.list2,"active-color":"var(--blue)",active:x.active,direction:"column"},null,8,["options","active"]),r(T,{class:"container-card-box-cell"},{default:o((()=>[r(F,{class:"font-13 color-gray"},{default:o((()=>[u(f(t.$t("financing.t7")),1)])),_:1}),r(F,{class:"font-13 font-weight color-black"},{default:o((()=>[u(f(x.item.eay)+"%",1)])),_:1})])),_:1}),r(T,{class:"container-card-box-cell"},{default:o((()=>[r(F,{class:"font-13 color-gray"},{default:o((()=>[u(f(t.$t("financing.t41")),1)])),_:1}),r(F,{class:"font-13 font-weight color-black"},{default:o((()=>[u(f(x.pre_income),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(T,{class:"footer"},{default:o((()=>[r(T,{class:"footer-top"},{default:o((()=>[r(T,{class:"check-box",onClick:a[5]||(a[5]=t=>x.checked=!x.checked)},{default:o((()=>[x.checked?(c(),s(V,{key:0,src:j,mode:"widthFix"})):d("",!0)])),_:1}),r(T,{class:"footer-top-right"},{default:o((()=>[r(F,{class:"font-13 color-gray",onClick:a[7]||(a[7]=t=>x.checked=!x.checked)},{default:o((()=>[u(f(t.$t("financing.t42"))+" ",1),r(F,{class:"font-13 font-weight color-primary",onClick:a[6]||(a[6]=m((a=>t.$mroute.webview(1,"bflc")),["stop"]))},{default:o((()=>[u(" 《"+f(t.$t("financing.t43"))+"》 ",1)])),_:1})])),_:1})])),_:1})])),_:1}),r(A,{class:_(["footer-button button-active",x.checked?"bg-black":"bg-gray"]),"hover-class":"none",onClick:C.apply},{default:o((()=>[r(F,{class:_(["font-13 font-weight",x.checked?"color-white":"color-gray"])},{default:o((()=>[u(f(t.$t("hand.confirm_t")),1)])),_:1},8,["class"])])),_:1},8,["class","onClick"])])),_:1}),r(L,{ref:"notice",type:"bottom"},{default:o((()=>[r(T,{class:"popup-wrap"},{default:o((()=>[r(T,{class:"popup-wrap-title"},{default:o((()=>[r(F,{class:"font-16 color-black font-weight"},{default:o((()=>[u(f(t.$t("financing.t44")),1)])),_:1}),r(T,{class:"close-icon",onClick:a[8]||(a[8]=a=>t.$refs.notice.close())},{default:o((()=>[r(D,{name:"close",size:"48",color:"var(--content-primary)"})])),_:1})])),_:1}),r(T,{class:"popup-wrap-content"},{default:o((()=>[r(F,{class:"font-13 color-gray"},{default:o((()=>[u(f(t.$t("financing.t45")),1)])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1})])),_:1},8,["data-theme"])}],["__scopeId","data-v-1121199b"]]);export{D as default};

import{m as a,a as t,b as e,f as o,a2 as s,i as l,a3 as r,bk as u,r as c,q as i,w as n,t as f,u as p,v as d,x as m,z as _,D as h,y as g,G as k,H as b,W as v,J as y}from"./index-Crl9YJuv.js";import{_ as $}from"./fui-icon.DR4EBh1k.js";import{r as w}from"./uni-app.es.DGAn-rK5.js";import{_ as C}from"./fui-nav-bar.BWTrzAGW.js";import{_ as x}from"./fui-bottom-popup.B6kgpvzO.js";import{f as A}from"./fui-avatar.D6LBhr0h.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=P({components:{fuiAvatar:A,fuiNavBar:C},data:()=>({editPopup:!1,name:""}),computed:{...a(["userinfo"]),...t(["userAccount","userTheme"])},methods:{...e(["updateInfo"]),dialogInputConfirm(a){if(a.length>20)return o({title:"昵称过长，请重新输入",icon:"none"}),!1;s({title:"保存中"}),l.saveNickname(a).then((t=>{r(),200==t.code&&(this.updateInfo("nickname",a),this.userinfo.nickname=a,this.$forceUpdate())})),this.editPopup=!1},uploadAvatar(){let a=this;u({count:1,sizeType:["compressed"],success(t){console.log(t),s({title:"上传中"}),l.uploadFile(t.tempFilePaths[0]).then((t=>{if(r(),200==t.statusCode){t=JSON.parse(t.data);a.updateInfo("avatar",t.data.url),a.userinfo.avatar=t.data.url,l.saveUploadAvatar(t.data.url),a.$forceUpdate()}})).catch((a=>{r()}))}})}}},[["render",function(a,t,e,o,s,l){const r=w(c("fui-icon"),$),u=w(c("fui-nav-bar"),C),A=k,P=b,j=f,I=v,S=y,z=w(c("fui-bottom-popup"),x);return p(),i(j,{class:"profile","data-theme":a.userTheme},{default:n((()=>[d(u,{title:a.$t("profile.profile"),zIndex:"9",background:"var(--background-primary)",color:"var(--content-primary)",statusBar:"",isFixed:"",isOccupy:"",onLeftClick:t[0]||(t[0]=t=>a.$mroute.back())},{default:n((()=>[d(r,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),d(j,{class:"profile-body"},{default:n((()=>[d(j,{class:"header"},{default:n((()=>[d(A,{class:"avatar-image",onClick:t[1]||(t[1]=a=>l.uploadAvatar()),src:a.userinfo.avatar?a.userinfo.avatar:"/static/img/avatar.png"},null,8,["src"]),d(j,{class:"row"},{default:n((()=>[d(P,{class:"font-16 color-black font-weight",onClick:t[2]||(t[2]=a=>s.editPopup=!0)},{default:n((()=>[m(_(null!=a.userinfo.nickname?a.userinfo.nickname:a.$t("profile.unset")),1)])),_:1}),d(A,{class:"edit-icon",src:`/static/img/tactic/bj-${a.userTheme}.png`,mode:"widthFix",onClick:t[3]||(t[3]=a=>s.editPopup=!0)},null,8,["src"])])),_:1}),d(j,{class:"real",onClick:t[4]||(t[4]=t=>a.$mroute.userauth())},{default:n((()=>[d(A,{class:"real-image",src:`/static/newImage/real-${1==a.userinfo.authStatus?"s":"n"}.png`,mode:"widthFix"},null,8,["src"]),d(j,{class:h(["real-type",1==a.userinfo.authStatus?"real-suc":"bg-gray"])},{default:n((()=>[-2===a.userinfo.authStatus?(p(),i(P,{key:0,class:"font-11 color-gray font-weight"},{default:n((()=>[m(_(a.$t("index.notAuth")),1)])),_:1})):g("",!0),-1===a.userinfo.authStatus?(p(),i(P,{key:1,class:"font-11 color-gray font-weight"},{default:n((()=>[m(_(a.$t("usAuth.type_c2")),1)])),_:1})):g("",!0),0===a.userinfo.authStatus?(p(),i(P,{key:2,class:"font-11 color-gray font-weight"},{default:n((()=>[m(_(a.$t("usAuth.type_c")),1)])),_:1})):g("",!0),1===a.userinfo.authStatus?(p(),i(P,{key:3,class:"font-11 color-gray font-weight"},{default:n((()=>[m(_(a.$t("usAuth.type_c1")),1)])),_:1})):g("",!0)])),_:1},8,["class"])])),_:1})])),_:1}),d(j,{class:"container"},{default:n((()=>[d(j,{class:"row"},{default:n((()=>[d(P,{class:"font-14 color-gray"},{default:n((()=>[m(_(a.$t("profile.account")),1)])),_:1}),d(j,{class:"row-item"},{default:n((()=>[d(P,{class:"font-14 color-black"},{default:n((()=>[m(_(a.userAccount),1)])),_:1})])),_:1})])),_:1}),d(j,{class:"row"},{default:n((()=>[d(P,{class:"font-14 color-gray"},{default:n((()=>[m(_(a.$t("profile.astatus")),1)])),_:1}),d(j,{class:"row-item"},{default:n((()=>[d(P,{class:h(["font-14",1==a.userinfo.status?"color-green":"color-red"])},{default:n((()=>[m(_(1==a.userinfo.status?a.$t("profile.status"):a.$t("profile.fail")),1)])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})])),_:1}),d(z,{show:s.editPopup,background:"var(--background-primary)",onClose:t[8]||(t[8]=a=>s.editPopup=!1)},{default:n((()=>[d(j,{class:"popup-warp"},{default:n((()=>[d(j,{class:"popup-title"},{default:n((()=>[d(P,{class:"font-15 color-black font-weight"},{default:n((()=>[m(_(a.$t("profile.pop_t1")),1)])),_:1}),d(j,{class:"close",onClick:t[5]||(t[5]=a=>s.editPopup=!1)},{default:n((()=>[d(r,{name:"close",size:"48",color:"var(--content-primary)"})])),_:1})])),_:1}),d(j,{class:"popup-content"},{default:n((()=>[d(I,{type:"text",modelValue:s.name,"onUpdate:modelValue":t[6]||(t[6]=a=>s.name=a),placeholder:a.$t("profile.unset"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),d(j,{class:"tips"},{default:n((()=>[d(P,{class:"font-12 color-black"},{default:n((()=>[m(_(a.$t("profile.pop_t2")),1)])),_:1}),d(P,{class:"font-12 color-black"},{default:n((()=>[m(_(a.$t("profile.pop_t3")),1)])),_:1}),d(P,{class:"font-12 color-red"},{default:n((()=>[m(_(a.$t("profile.pop_t4")),1)])),_:1}),d(P,{class:"font-12 color-black"},{default:n((()=>[m(_(a.$t("profile.pop_t5")),1)])),_:1})])),_:1}),d(S,{class:"button bg-black","hover-class":"none",onClick:t[7]||(t[7]=a=>l.dialogInputConfirm(s.name))},{default:n((()=>[d(P,{class:"font-13 color-white font-weight"},{default:n((()=>[m(_(a.$t("login.confirm")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-db3b36dc"]]);export{j as default};

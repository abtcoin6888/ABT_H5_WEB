import{l as t,a as e,bk as a,a2 as s,i as o,a3 as c,f as r,e as l,a7 as n,r as i,q as d,w as u,t as f,u as h,v as g,x as m,z as p,C as _,y as k,A as y,F as b,B as w,H as $,G as v,a9 as x,W as C,D as z}from"./index-Crl9YJuv.js";import{_ as q}from"./fui-icon.DR4EBh1k.js";import{r as I}from"./uni-app.es.DGAn-rK5.js";import{_ as T}from"./fui-nav-bar.BWTrzAGW.js";import{_ as j}from"./coin-indexed-xlist.BGRBSUlj.js";import{_ as R}from"./uni-popup.xy3aTQLU.js";import{_ as L}from"./loading.DJvK2rcY.js";import{_ as F}from"./alert.BH0adChV.js";import{_ as N}from"./fui-toast.CkkCpHLy.js";import{U as V}from"./uqrcode.DDP-o99F.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./fui-loading.BJbn8vuY.js";import"./uni-popup-dialog.D9c9DJQu.js";const O=S({components:{fuiNavBar:T},data:()=>({coin:[],netlist:[],net:!1,current:!1,token:"",content:"",remark:!1,lang:"",qrsize:120,amount:"",voucherImg:void 0}),onLoad(){this.getRechargeCurrency()},onShow(){this.lang=t("lang")},computed:{...e(["userTheme"])},onReady(){setTimeout((()=>{this.$refs.selectp.open()}),200)},watch:{net(t){!1!==t&&this.getRechargeToken()}},methods:{uploadVoucher(){let t=this;a({count:1,sizeType:["compressed"],success(e){console.log(e),s({title:"上传中"}),o.uploadFile(e.tempFilePaths[0]).then((e=>{if(c(),200==e.statusCode){e=JSON.parse(e.data);t.voucherImg=e.data.url}})).catch((t=>{c()}))}})},saveVoucher(){return this.amount?(this.token||this.current.id||r({title:"請選擇網絡",icon:"none",mask:!0}),this.voucherImg?(this.$refs.loading.open(),void o.saveRecharge({voucherImg:this.voucherImg,token:this.token,chain_network:this.current.id,amount:this.amount}).then((t=>{this.$refs.loading.close(),r({title:this.$t("recharge.t7"),icon:"none",mask:!0})}))):(r({title:this.$t("recharge.t6"),icon:"none",mask:!0}),!1)):(r({title:this.$t("recharge.t5"),icon:"none",mask:!0}),!1)},saveImg(){this.content=this.$t("recharge.t1"),this.$refs.alert.open()},copy(){var t=this;""!=t.token&&l({data:t.token,showToast:!1,success(){t.showToast(t.$t("recharge.t3"),1e3)}})},getRechargeToken(){if(!this.current)return!1;if(1===parseInt(this.current.d_c)){this.recharge_token=JSON.parse(this.current.d_token),this.key_token=this.netlist[this.net].symbol,this.remark=JSON.parse(this.current.remark),this.token=this.recharge_token[this.key_token];var t=new V;t.data=this.token,t.size=this.qrsize,t.make();var e=n("qrcode",this);t.canvasContext=e,t.drawCanvas()}else this.$refs.loading.open(),o.getRechargeToken(this.netlist[this.net].id).then((t=>{this.$refs.loading.close(),this.token=t.data.address;var e=new V;e.data=t.data.address,e.size=this.qrsize,e.make();var a=n("qrcode",this);e.canvasContext=a,e.drawCanvas()}))},getNetList(t){o.getNetList(t).then((t=>{this.netlist=t.data.list,this.net=0,this.getRechargeToken()}))},getRechargeCurrency(){o.getRechargeCurrency().then((t=>{this.coin=t.data.list,console.log(this.coin),this.getNetList(this.coin[0].id)}))},itemclick(t){console.log(t),this.current=t,this.$refs.selectp.close(),this.getNetList(t.id)},showToast(t,e){let a={};a.text=t,a.duration=e,this.$refs.toast.show(a)}}},[["render",function(t,e,a,s,o,c){const r=I(i("fui-icon"),q),l=I(i("fui-nav-bar"),T),n=$,V=v,S=f,O=x,D=C,E=I(i("coin-indexed-xlist"),j),J=I(i("uni-popup"),R),U=I(i("loading"),L),A=I(i("alert"),F),B=I(i("fui-toast"),N);return h(),d(S,{class:"recharge","data-theme":t.userTheme},{default:u((()=>[g(l,{isFixed:"",isOccupy:"",padding:15,zIndex:"2",color:"var(--content-primary)",background:"var(--background-primary)",title:t.$t("rec.t1"),onLeftClick:e[1]||(e[1]=e=>t.$mroute.back())},{right:u((()=>[g(r,{class:"mr-10",name:"order-fill",size:"40",color:"var(--content-tertiary)",onClick:e[0]||(e[0]=e=>t.$mroute.rechargeRecord())})])),default:u((()=>[g(r,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),g(S,{class:"recharge-body"},{default:u((()=>[g(S,{class:"recharge-body-cell"},{default:u((()=>[g(n,{class:"font-13 font-weight color-black"},{default:u((()=>[m(p(t.$t("rec.t2")),1)])),_:1}),g(S,{class:"recharge-body-cell-select mt-10",onClick:e[2]||(e[2]=e=>t.$refs.selectp.open())},{default:u((()=>[o.current?(h(),d(S,{key:0,class:"flex align-center"},{default:u((()=>[g(V,{class:"coin-icon",src:o.current.icon,mode:"widthFix"},null,8,["src"]),g(n,{class:"font-13 color-black font-weight"},{default:u((()=>[m(p(o.current.symbol),1)])),_:1})])),_:1})):(h(),d(S,{key:1,class:"flex align-center"},{default:u((()=>[g(n,{class:"font-13 color-black font-weight"},{default:u((()=>[m(p(t.$t("rec.t3")),1)])),_:1})])),_:1})),g(V,{class:"down-icon",src:`/static/img/tactic/down-${t.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),g(S,{class:"recharge-body-cell mt-15"},{default:u((()=>[g(n,{class:"font-13 font-weight color-black"},{default:u((()=>[m(p(t.$t("rec.t4")),1)])),_:1}),g(S,{class:"recharge-body-cell-select mt-10",onClick:e[3]||(e[3]=e=>t.$refs.chain.open())},{default:u((()=>[g(S,{class:"flex align-center"},{default:u((()=>[!1===o.net&&!1===o.current?(h(),d(n,{key:0,class:"font-13 color-black font-weight"},{default:u((()=>[m(p(t.$t("rec.t5")),1)])),_:1})):(h(),d(n,{key:1,class:"font-13 color-black font-weight"},{default:u((()=>[m(p(o.netlist[o.net].symbol),1)])),_:1}))])),_:1}),g(V,{class:"down-icon",src:`/static/img/tactic/down-${t.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),g(S,{class:"recharge-body-card mt-15"},{default:u((()=>[g(S,{class:"canvas-wrap"},{default:u((()=>[g(S,{class:"canvas-box",style:_(`width: ${o.qrsize+10}px; height: ${o.qrsize+10}px`)},{default:u((()=>[g(O,{id:"qrcode","canvas-id":"qrcode",class:"canvas-qrcode",style:_(`width: ${o.qrsize}px; height: ${o.qrsize}px`)},null,8,["style"])])),_:1},8,["style"])])),_:1}),g(S,{class:"recharge-body-card-column"},{default:u((()=>[g(n,{class:"font-13 color-gray"},{default:u((()=>[m(p(t.$t("rec.t6")),1)])),_:1}),g(n,{class:"font-13 font-weight color-black"},{default:u((()=>[m(p(o.token),1)])),_:1})])),_:1})])),_:1}),o.current.d_token?(h(),d(S,{key:0,style:{"margin-top":"30rpx"}},{default:u((()=>[g(S,{class:"recharge-body-cell mt-15"},{default:u((()=>[g(n,{class:"font-13 font-weight color-black"},{default:u((()=>[m(p(t.$t("rec.t20")),1)])),_:1}),g(S,{class:"recharge-body-cell-select mt-10"},{default:u((()=>[g(S,{class:"flex align-center"},{default:u((()=>[g(D,{type:"text",modelValue:o.amount,"onUpdate:modelValue":e[4]||(e[4]=t=>o.amount=t),class:"font-13 color-black font-weight",placeholder:t.$t("recharge.t5"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})])),_:1})])),_:1}),g(S,{class:"recharge-body-card mt-15"},{default:u((()=>[this.voucherImg?k("",!0):(h(),d(n,{key:0,class:"font-13 font-weight color-black"},{default:u((()=>[m(p(t.$t("recharge.t6")),1)])),_:1})),g(S,{class:"voucher-box",style:_(`width: ${o.qrsize+10}px; height: ${o.qrsize+10}px`)},{default:u((()=>[g(V,{class:"avatar-image",onClick:e[5]||(e[5]=t=>c.uploadVoucher()),src:o.voucherImg?o.voucherImg:"/static/img/upload.png"},null,8,["src"])])),_:1},8,["style"]),g(S,{class:"button_save",onClick:c.saveVoucher},{default:u((()=>[g(n,{class:"font-13 font-weight color-black"},{default:u((()=>[m(p(t.$t("rec.t21")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})):k("",!0),g(S,{class:"recharge-body-card mt-15"},{default:u((()=>[g(S,{class:"recharge-body-card-row"},{default:u((()=>[g(n,{class:"font-12 color-gray"},{default:u((()=>[m(p(t.$t("rec.t7")),1)])),_:1}),g(n,{class:"font-12 color-black font-weight"},{default:u((()=>[m(p(o.current?o.current.recharge_min:"--")+" "+p(o.current.symbol),1)])),_:1})])),_:1}),g(S,{class:"recharge-body-card-row"},{default:u((()=>[g(n,{class:"font-12 color-gray"},{default:u((()=>[m(p(t.$t("rec.t8")),1)])),_:1}),g(n,{class:"font-12 color-black font-weight"},{default:u((()=>[m(" 20 ")])),_:1})])),_:1}),g(S,{class:"recharge-body-card-row"},{default:u((()=>[g(n,{class:"font-12 color-gray"},{default:u((()=>[m(p(t.$t("rec.t9")),1)])),_:1}),g(n,{class:"font-12 color-black font-weight"},{default:u((()=>[m(" 20 ")])),_:1})])),_:1})])),_:1}),g(S,{class:"recharge-body-cell flex flex-column mt-15 recharge-body-last-tips"},{default:u((()=>[g(n,{class:"font-13 color-black font-weight"},{default:u((()=>[m(p(t.$t("rec.t10")),1)])),_:1}),0===o.current.d_c?(h(),y(b,{key:0},[g(n,{class:"font-12 color-gray mt-15"},{default:u((()=>[m(p(t.$t("rec.t11").replace("Ethereum(ERC20)_USDT",o.current.symbol)),1)])),_:1}),g(n,{class:"font-12 color-gray mt-10"},{default:u((()=>[m(p(t.$t("rec.t12")),1)])),_:1}),g(n,{class:"font-12 color-gray mt-10"},{default:u((()=>[m(p(t.$t("rec.t13")),1)])),_:1})],64)):(h(),d(n,{key:1,class:"font-12 color-gray mt-15"},{default:u((()=>[m(p(o.remark[o.lang]),1)])),_:1}))])),_:1})])),_:1}),g(S,{class:"recharge-footer"},{default:u((()=>[g(S,{class:"button button-active",onClick:c.saveImg},{default:u((()=>[g(n,{class:"font-13 font-weight color-black"},{default:u((()=>[m(p(t.$t("rec.t14")),1)])),_:1})])),_:1},8,["onClick"]),g(S,{class:"button button-active",onClick:c.copy},{default:u((()=>[g(n,{class:"font-13 font-weight color-white"},{default:u((()=>[m(p(t.$t("rec.t15")),1)])),_:1})])),_:1},8,["onClick"])])),_:1}),g(J,{ref:"selectp","safe-area":!1,type:"bottom",style:{height:"100%",width:"100%"}},{default:u((()=>[g(S,{style:_({height:t.$device.windowHeight+"px"})},{default:u((()=>[g(l,{zIndex:"2",background:"var(--background-primary)",color:"var(--content-primary)",title:t.$t("rec.t16"),onLeftClick:e[6]||(e[6]=e=>t.$refs.selectp.close())},{default:u((()=>[g(r,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),g(E,{"name-key":"symbol",nameKey:"symbol",dataList:o.coin,showAvatar:!0,onItemclick:c.itemclick},null,8,["dataList","onItemclick"])])),_:1},8,["style"])])),_:1},512),g(J,{ref:"chain","safe-area":!1,type:"bottom"},{default:u((()=>[g(S,{class:"popup-wrap"},{default:u((()=>[g(S,{class:"popup-wrap-title"},{default:u((()=>[g(n,{class:"font-16 color-black font-weight"},{default:u((()=>[m(p(t.$t("rec.t17")),1)])),_:1}),g(S,{class:"close-icon",onClick:e[7]||(e[7]=e=>t.$refs.chain.close())},{default:u((()=>[g(r,{name:"close",size:"48",color:"var(--content-primary)"})])),_:1})])),_:1}),g(S,{class:"popup-wrap-content"},{default:u((()=>[g(S,{class:"popup-wrap-content-tip"},{default:u((()=>[g(n,{class:"font-12 color-gray"},{default:u((()=>[m(p(t.$t("rec.t18")),1)])),_:1})])),_:1}),g(S,{class:"popup-wrap-content-list"},{default:u((()=>[(h(!0),y(b,null,w(o.netlist,((e,a)=>(h(),d(S,{class:z(["popup-wrap-content-list-item",{"popup-wrap-content-list-item-active":o.net===a}]),onClick:e=>{o.net=a,t.$refs.chain.close()}},{default:u((()=>[g(n,{class:"font-12 color-black font-weight"},{default:u((()=>[m(p(e.symbol),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),256))])),_:1})])),_:1})])),_:1})])),_:1},512),g(U,{ref:"loading"},null,512),g(A,{ref:"alert",title:t.$t("rec.t19"),content:o.content},null,8,["title","content"]),g(B,{ref:"toast",size:"26",color:"#ffffff",background:"rgba(0,0,0,.8)"},{default:u((()=>[g(r,{name:"checkbox",color:"#fff"})])),_:1},512)])),_:1},8,["data-theme"])}],["__scopeId","data-v-3a3d2b09"]]);export{O as default};

import{bB as e,u as t,q as a,w as s,br as l,v as i,C as c,D as r,E as o,y as h,x as n,z as d,t as u,W as f,H as p,a as _,l as g,a5 as b,M as m,O as y,P as v,f as k,r as w,Q as x,A as S,B as C,F as B,G as T,S as F}from"./index-Crl9YJuv.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as I}from"./uni-app.es.DGAn-rK5.js";import{_ as L}from"./fui-nav-bar.BWTrzAGW.js";import{c as R}from"./currency.DpKVvmTd.js";import{e as j}from"./emptyView.D5ujbzxh.js";import"./fui-empty.DB1Js3PB.js";const G=A({name:"fui-search-bar",emits:["clear","focus","blur","click","cancel","input","search"],props:{background:{type:String,default:""},paddingTb:{type:[Number,String],default:16},paddingLr:{type:[Number,String],default:24},height:{type:[Number,String],default:72},radius:{type:[Number,String],default:8},color:{type:String,default:""},inputBackground:{type:String,default:"#fff"},focus:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入搜索关键词"},isLeft:{type:Boolean,default:!1},value:{type:String,default:""},disabled:{type:Boolean,default:!1},cancel:{type:Boolean,default:!0},cancelText:{type:String,default:"取消"},cancelColor:{type:String,default:"#7F7F7F"},searchText:{type:String,default:"搜索"},searchColor:{type:String,default:""},showInput:{type:Boolean,default:!0},showLabel:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1}},created(){this.val=this.value,this.plholder=this.placeholder,(this.focus||this.val.length>0)&&(this.isSearch=!0)},mounted(){this.$nextTick((()=>{setTimeout((()=>{this.isFocus=this.focus}),300)}))},watch:{focus(e){this.$nextTick((()=>{setTimeout((()=>{this.isFocus=e}),20)}))},value(e){this.val=e,(this.focus||this.val.length>0)&&(this.isSearch=!0)},placeholder(e){this.plholder=this.placeholder}},computed:{getSearchColor(){return this.searchColor}},data:()=>({isSearch:!1,isFocus:!1,val:"",plholder:""}),methods:{clearInput(){this.val="",this.isFocus=!0,this.$emit("clear")},inputFocus(e){this.showLabel?this.onShowInput():this.isSearch=!0,this.$emit("focus",e)},inputBlur(e){this.isFocus=!1,this.cancel||this.val||(this.isSearch=!1),this.$emit("blur",e)},onShowInput(){!this.disabled&&this.showInput&&(this.isSearch=!0,this.$nextTick((()=>{setTimeout((()=>{this.isFocus=!0}),50)}))),this.$emit("click",{})},hideInput(){this.isSearch=!1,this.isFocus=!1,e(),this.$emit("cancel",{})},inputChange(e){this.val=e.detail.value,this.$emit("input",e)},search(){this.$emit("search",{detail:{value:this.val}})},reset(){this.isSearch=!1,this.isFocus=!1,this.val="",e()}}},[["render",function(e,_,g,b,m,y){const v=u,k=f,w=p;return t(),a(v,{class:r(["fui-search__bar-wrap",{"fui-searchbar__wrap-bg":!g.background}]),style:c({background:g.background,paddingTop:g.paddingTb+"rpx",paddingBottom:g.paddingTb+"rpx",paddingLeft:g.paddingLr+"rpx",paddingRight:g.paddingLr+"rpx"})},{default:s((()=>[l(e.$slots,"default",{},void 0,!0),i(v,{class:"fui-search__bar-form",style:c({height:g.height+"rpx"})},{default:s((()=>[g.showInput?(t(),a(v,{key:0,class:r(["fui-search__bar-box",{"fui-searchbar__focus-invalid":!m.isFocus&&!m.isSearch&&g.showLabel&&!g.disabled}]),style:c({height:g.height+"rpx",borderRadius:g.radius+"rpx",background:g.inputBackground})},{default:s((()=>[i(v,{class:"fui-search__bar-icon"},{default:s((()=>[i(v,{class:"fui-sbi__circle"}),i(v,{class:"fui-sbi__line"})])),_:1}),i(k,{ref:"searchBarRef",class:r(["fui-search__bar-input",{"fui-sb__input-color":!g.color}]),style:c({color:g.color,height:g.height+"rpx"}),"placeholder-class":"fui-search__bar-pl",placeholder:m.plholder,value:m.val,focus:m.isFocus,disabled:g.disabled,"confirm-type":"search",onBlur:y.inputBlur,onFocus:y.inputFocus,onInput:y.inputChange,onConfirm:y.search},null,8,["class","style","placeholder","value","focus","disabled","onBlur","onFocus","onInput","onConfirm"]),m.val.length>0&&!g.disabled?(t(),a(v,{key:0,class:"fui-sbi__clear-wrap",onClick:o(y.clearInput,["stop"])},{default:s((()=>[i(v,{class:"fui-sbi__clear"},{default:s((()=>[i(v,{class:"fui-sbi__clear-a"})])),_:1}),i(v,{class:"fui-sbi__clear"},{default:s((()=>[i(v,{class:"fui-sbi__clear-b"})])),_:1})])),_:1},8,["onClick"])):h("",!0)])),_:1},8,["class","style"])):h("",!0),m.isFocus||m.isSearch||!g.showLabel?h("",!0):(t(),a(v,{key:1,class:r(["fui-search__bar-label",[g.isLeft?"fui-sb__label-left":"fui-sb__label-center"]]),style:c({borderRadius:g.radius+"rpx",background:g.inputBackground}),onClick:y.onShowInput},{default:s((()=>[i(v,{class:"fui-search__bar-icon"},{default:s((()=>[i(v,{class:"fui-sbi__circle"}),i(v,{class:"fui-sbi__line"})])),_:1}),i(w,{class:"fui-search__bar-text"},{default:s((()=>[n(d(g.placeholder),1)])),_:1})])),_:1},8,["class","style","onClick"]))])),_:1},8,["style"]),g.cancel&&m.isSearch&&!m.val&&g.cancelText&&!0!==g.cancelText&&"true"!==g.cancelText?(t(),a(w,{key:0,class:"fui-search__bar-btn",style:c({color:g.cancelColor}),onClick:y.hideInput},{default:s((()=>[n(d(g.cancelText),1)])),_:1},8,["style","onClick"])):h("",!0),m.val&&!g.disabled&&m.isSearch&&g.searchText&&!0!==g.searchText&&"true"!==g.searchText?(t(),a(w,{key:1,class:r(["fui-search__bar-btn",{"fui-sb__btn-color":!g.searchColor}]),style:c({color:y.getSearchColor}),onClick:y.search},{default:s((()=>[n(d(g.searchText),1)])),_:1},8,["class","style","onClick"])):h("",!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-9cf9afcb"]]);var $;const D=A({components:{emptyView:j},computed:{..._(["userTheme"])},data:()=>({value:"",list:[],history:[],scrollHeight:""}),onReady(){this.getMatchesList(),this.history=g("chistory")},watch:{value(e){this.list=$.filter((t=>t.symbol.toLowerCase().includes(e.toLowerCase())))}},methods:{navInit(e){var t=e.height+e.statusBarHeight;this.scrollHeight=this.$device.windowHeight-t},back(){console.log(1),b({animationType:"fade-out",animationDuration:200})},clearHistory(){m("chistory"),this.history=[]},addHistory(e){var t=g("chistory");void 0!==t&&t||(t=[]),(t=t.filter((t=>t.id!=this.list[e].id))).push(this.list[e]),y("chistory",t),this.history=t,this.$mroute.toKline(0,this.list[e].id,1)},toKlines(e){this.$mroute.toKline()},selected(e){if(this.list=this.list.map(((t,a,s)=>(a==e&&(t.select=1),t))),1==this.list[e].is_contract){var t=g("select-contract");t.filter((t=>t.id!=this.list[e].id)),t.push(this.list[e]),y("select-contract",t)}if(1==this.list[e].is_trade){var a=g("select-trade");a.filter((t=>t.id!=this.list[e].id)),a.push(this.list[e]),y("select-trade",a)}y("load",1),v("addSelect"),k({title:this.$t("trade.ts1"),icon:"none"})},deleted(e){var t;if(this.list=this.list.map(((a,s,l)=>(s==e&&(a.select=0,t=a),a))),1==t.is_contract){var a=g("select-contract");a=a.filter((e=>e.id!=t.id)),y("select-contract",a)}if(1==t.is_trade){var s=g("select-trade");s=s.filter((e=>e.id!=t.id)),y("select-trade",s)}y("load",1),v("addSelect"),k({title:this.$t("trade.ts2"),icon:"none"})},async getMatchesList(){var e=await R.matchesCurrency(),t=g("select-trade");void 0!==t&&0!=t.length||(t=[]);var a=g("select-contract");if(void 0!==a&&0!=a.length||(a=[]),200==e.code){for(var s=0;s<e.data.length;s++)e.data=e.data.filter((e=>!this.hideFutures(e.is_futures))),1==e.data[s].is_trade&&t.length>0&&(e.data[s].select=t.filter((t=>t.id==e.data[s].id))),1==e.data[s].is_contract&&a.length>0&&(e.data[s].select=a.filter((t=>t.id==e.data[s].id)));$=e.data,this.list=e.data}},hideFutures:e=>1==e,onSearch(e){this.value=e.detail.value}}},[["render",function(e,l,o,f,_,g){const b=I(w("fui-search-bar"),G),m=u,y=I(w("fui-nav-bar"),L),v=p,k=T,A=x("empty-view"),R=F;return t(),a(m,{class:"searchWrap","data-theme":e.userTheme,platform:e.$platform},{default:s((()=>[i(y,{statusBar:"",padding:0,isFixed:"",isOccupy:"",background:"var(--background-new)",zIndex:"9",custom:"",onInit:g.navInit},{default:s((()=>[i(m,{class:"nav-bar"},{default:s((()=>[i(b,{paddingLr:0,height:68,radius:68,background:"var(--background-new)",inputBackground:"var(--background-secondary)",cancelColor:"var(--content-primary)",searchColor:"var(--color-primary)",color:"var(--content-primary)",placeholder:this.$t("search.please_enter"),modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),focus:!0,searchText:e.$t("wallete.search"),cancelText:e.$t("login.cancel"),onSearch:g.onSearch,onCancel:g.back,onClear:l[1]||(l[1]=e=>_.value="")},null,8,["placeholder","modelValue","searchText","cancelText","onSearch","onCancel"])])),_:1})])),_:1},8,["onInit"]),i(R,{"scroll-y":"true",class:"scroll-view",style:c(`height:${_.scrollHeight}px`)},{default:s((()=>[0!=_.history.length?(t(),a(m,{key:0,class:"historical-search"},{default:s((()=>[i(m,{class:"title-box"},{default:s((()=>[i(v,null,{default:s((()=>[n(d(e.$t("search.history_search")),1)])),_:1}),i(m,{class:"delete-box",onClick:l[2]||(l[2]=e=>g.clearHistory())},{default:s((()=>[i(k,{src:`/static/newImage/delete-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),i(m,{class:"tag-group"},{default:s((()=>[(t(!0),S(B,null,C(_.history,((l,c)=>(t(),a(m,{class:"item",key:"h"+l.iid,onClick:t=>e.$mroute.toKline(0,l.id,1)},{default:s((()=>[i(v,{class:"font-weight"},{default:s((()=>[n(d(l.symbol),1)])),_:2},1024),i(v,null,{default:s((()=>[n("/ USDT")])),_:1})])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):h("",!0),0!=_.list.length?(t(),S(B,{key:1},[i(m,{class:"hot-title"},{default:s((()=>[i(v,null,{default:s((()=>[n(d(e.$t("search.hot_search")),1)])),_:1})])),_:1}),i(m,{class:"hot-list"},{default:s((()=>[(t(!0),S(B,null,C(_.list,((l,c)=>(t(),a(m,{key:c,class:"hot-item",onClick:e=>g.addHistory(c)},{default:s((()=>[i(m,{class:"hot-item-left"},{default:s((()=>[i(m,{class:"collect-box"},{default:s((()=>[l.select&&0!=l.select?h("",!0):(t(),a(k,{key:0,src:"data:image/webp;base64,UklGRgYCAABXRUJQVlA4TPoBAAAvV8AVEBehoG0byd3xJ3oUvtJQ0LaR4/vNH+Oj2AratpHcHX+iR+Ergki2cb/Ba/BFoJmoGhDhGgiw557vv/Q3vlENWqC/BfGr5QFGhDK+r4uIEZelgb/+hRBWGRPhwUROxHvuOs6GZNu24jZ66oOj1gg/JIOTvP//TEvgqzeqVYOI/k8A/cMpRanTr2feaoUmfnvXJ7yL6pR8aLVpj4wyjo+96DKd4FqXcCaqUvJpq0l7ziji+LwXPaYErvUIKVGNkpOtFm2aUcJxuhcdpgxc6xBy7CqUnNVq0OaJCvxw5p/LyONRVnN92zn7dmvmqiweEEU1182te8UQGDrsMXa3pp7LIo+LrODmMrjAKm6SNrGSddqXFl2a0cKkWS3WNBp0GCjnqMFIeddwtW2l3C5ca3OUX15Xegl9dLhOT58erzLS59dwBW8J0QW8zRGmvNCiEOyA1RPyiDQS9upRvCX0BmUkeEERPAoYG+ELgwregmLxDIrBe6LscMKwgrbgVGgGx6A9cXYwYWDBWpAqLINksJ5IO5Rwzq126xRysCAtOXohIpLvHBWSSYuWDl1IM0jPFD/S6dGn7EDCidFRovtLYMFZzm13yjiFcxVOc6oXyuq+TzVX2C1ld+EK9sAP9NHhyOLQ8CY6+rD7e9MT8rSHeCfAKYY40n9GAQ==",mode:"widthFix",onClick:e=>g.selected(c)},null,8,["onClick"])),l.select&&0!=l.select?(t(),a(k,{key:1,src:"data:image/webp;base64,UklGRuwBAABXRUJQVlA4TOABAAAvV8AVEPeAoG3buD//M75CQ23bNgzhKf+/WxW3bRsx16/7b1vYQNo2nX9VV3ALl9ArWIDXr3CAC4YQFwkP9floxEHaA8IP96OP9lSA9m/gMIhZFJJt24oi6T0bIiBN0gbxqYT//6Gh4PWNatUgov8TQP9wyhx0+q2Ytz+Fev466rN/M+oEPg3aHGdWmcjnlejSX2Cvy37FqBL4ctDkuGYViXy9Ej36DPZ67DlGjcDZQYsjzyoROb8SHfoC7HXYS7QqBC4aNDjKGAV+uPDPY2RZwjj4d8PFt7cbxjAvEPM4ePc+XiYlhk6NMcfb+SHMZaJhBbelQNxZxU3yelbS5320OPKsFjYvaDHnkdPBUclOA09l5/S0dabSMT1rXai8vJ70ErrVPcfS3d1TPN0/pyfUgRBjwlsXwpQXmhGCdViWkDskT9hzhVIHQnconuAFRfBox9gIXxhU8CaUgGdRLF6L0sAJwwrahDOiWRyL1uI0YMLAgjUhjVgWyWK1SA2UcMm1W+YhlWBBmkpYISISW2JEsnkm0GlMeRapzak9Xe6qnAZIONMslBk/GSw407V1pIJDujbiuEtWqGi0l9wTmkDFY3pCOKkd3erOAg65L2ahm+PniyXkoUlmJMDBJOPpP6M=",mode:"widthFix",onClick:e=>g.deleted(c)},null,8,["onClick"])):h("",!0)])),_:2},1024),i(m,{class:"row"},{default:s((()=>[i(v,{class:"font-weight"},{default:s((()=>[n(d(l.symbol),1)])),_:2},1024),i(v,null,{default:s((()=>[n(" / USDT ")])),_:1}),1==l.is_contract?(t(),a(v,{key:0,class:"mini-tag"},{default:s((()=>[n(d(e.$t("tab.contract")),1)])),_:1})):h("",!0),1==l.is_trade?(t(),a(v,{key:1,class:"mini-tag"},{default:s((()=>[n(d(e.$t("index.spot")),1)])),_:1})):h("",!0),1==l.is_futures?(t(),a(v,{key:2,class:"mini-tag"},{default:s((()=>[n(d(e.$t("search.option")),1)])),_:1})):h("",!0)])),_:2},1024)])),_:2},1024),i(m,{class:"hot-item-right"},{default:s((()=>[i(m,{class:"column"},{default:s((()=>[i(v,{class:r(["color-black font-weight",{price_down:l.change_rate<0,price_up:l.change_rate>0}])},{default:s((()=>[n(d(e.$util.thousandSeparator(l.new_price,l.decimals)),1)])),_:2},1032,["class"]),i(v,{class:r(["color-black",{price_down:l.change_rate<0,price_up:l.change_rate>0}])},{default:s((()=>[n(d(l.change_rate?l.change_rate:"--")+"% ",1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})],64)):h("",!0),i(A,{visible:0==_.list.length,width:750,height:700,title:e.$t("list.not_data")},null,8,["visible","title"])])),_:1},8,["style"])])),_:1},8,["data-theme","platform"])}],["__scopeId","data-v-87f8fbec"]]);export{D as default};

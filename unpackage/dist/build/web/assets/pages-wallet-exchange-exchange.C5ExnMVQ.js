import{_ as t}from"./fui-icon.BbrID5X2.js";import{I as e,a,i as n,r as c,q as i,w as s,t as o,u as l,v as r,x as u,z as f,D as d,A as h,B as m,F as g,C as p,G as x,H as _,W as $,J as b}from"./index-CvJkP8r7.js";import{r as y}from"./uni-app.es.4grYzir1.js";import{_ as k}from"./fui-nav-bar.CZAK61wT.js";import{_ as w}from"./uni-popup.BKNKbknm.js";import{_ as v}from"./coin-indexed-xlist.B8OWLfeG.js";import{_ as C}from"./loading.CdlUmBbP.js";import{_ as j}from"./alert.DkjAnFY_.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{N as I}from"./index.yy0eSKon.js";import"./fui-loading.BOHvl-ks.js";import"./uni-popup-dialog.jPMVSOx-.js";const H=F({components:{[I.name]:I,[e.name]:e,fuiNavBar:k},data:()=>({direction:0,coin:[],current:!1,amount:"",accounts:[],findex:0,tindex:1,content:"",navHeight:""}),computed:{...a(["userTheme"])},onReady(){this.getCurrency()},onShow(){this.accounts=[{text:this.$t("wallete.capital_acc"),field:"balance"},{text:this.$t("wallete.spot_acc"),field:"trade_balance"},{text:this.$t("wallete.contract_acc"),field:"contract_balance"},{text:this.$t("wallete.options_acc"),field:"future_balance"},{text:this.$t("wallete.fin_acc"),field:"finance_balance"}]},methods:{navInit(t){this.navHeight=t.height+t.statusBarHeight},confirm(){if(""==this.amount||parseFloat(this.amount)<=0)return!1;if(!1===this.current)return!1;if(parseFloat(this.amount)>parseFloat(this.current[this.accounts[this.findex].field]))return this.content=this.$t("financing.t97"),this.$refs.alert.open(),!1;const t={currency_id:this.current.id,amount:this.amount,to:this.accounts[this.tindex].field,from:this.accounts[this.findex].field};this.$refs.loading.open(),n.postExchange(t).then((t=>{if(this.$refs.loading.close(),200!=t.code)return this.content=t.message,this.$refs.alert.open(),!1;this.current[this.accounts[this.findex].field]=this.current[this.accounts[this.findex].field]-this.amount,this.content=this.$t("financing.t98"),this.$refs.alert.open(),this.getCurrency()})).catch((t=>{this.$refs.loading.close()}))},exchange(){var t=this.findex;this.findex=this.tindex,this.tindex=t},setAccount(t){0==this.direction&&this.tindex!=t&&(this.findex=t,this.$refs.accounts.close()),1==this.direction&&this.findex!=t&&(this.tindex=t,this.$refs.accounts.close()),this.amount=""},getCurrency(){n.getAccountCurrency().then((t=>{this.coin=t.data}))},itemclick(t){this.current=t,this.amount="",this.$refs.selectp.close()}}},[["render",function(e,a,n,F,I,H){const T=y(c("fui-icon"),t),z=x,A=y(c("fui-nav-bar"),k),B=_,L=o,R=$,S=b,V=y(c("uni-popup"),w),q=y(c("coin-indexed-xlist"),v),E=y(c("loading"),C),K=y(c("alert"),j);return l(),i(L,{class:"exchange","data-theme":e.userTheme},{default:s((()=>[r(A,{zIndex:"1",isFixed:"",isOccupy:"",padding:15,background:"var(--background-primary)",color:"var(--content-primary)",title:e.$t("financing.t81"),onLeftClick:a[0]||(a[0]=t=>e.$mroute.back()),onRightClick:a[1]||(a[1]=t=>e.$mroute.rechargeRecord())},{right:s((()=>[r(z,{class:"order-image",src:`/static/img/tactic/order-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),default:s((()=>[r(T,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title"]),r(L,{class:"exchange-container-wrap"},{default:s((()=>[r(L,{class:"_exchange_box"},{default:s((()=>[r(L,{class:"ex-left"},{default:s((()=>[r(B,{class:"font-14 color-gray"},{default:s((()=>[u(f(e.$t("financing.t82")),1)])),_:1}),r(B,{class:"font-14 color-gray"},{default:s((()=>[u(f(e.$t("financing.t83")),1)])),_:1})])),_:1}),r(L,{class:"ex-center"},{default:s((()=>[r(L,{class:"cell",onClick:a[2]||(a[2]=t=>{I.direction=0,e.$refs.accounts.open()})},{default:s((()=>[r(B,{class:"font-14 color-black font-weight"},{default:s((()=>[u(f(I.accounts[I.findex].text),1)])),_:1}),r(z,{class:"down-icon",src:`/static/img/tactic/down-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1}),r(L,{class:"cell",onClick:a[3]||(a[3]=t=>{I.direction=1,e.$refs.accounts.open()})},{default:s((()=>[r(B,{class:"font-14 color-black font-weight"},{default:s((()=>[u(f(I.accounts[I.tindex].text),1)])),_:1}),r(z,{class:"down-icon",src:`/static/img/tactic/down-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),r(L,{class:"ex-right"},{default:s((()=>[r(L,{class:"switch-box",onClick:H.exchange},{default:s((()=>[r(z,{class:"icon",src:`/static/wallet/exchange-${e.userTheme}.png`},null,8,["src"])])),_:1},8,["onClick"])])),_:1})])),_:1}),r(L,{class:"row-box"},{default:s((()=>[r(L,{class:"_title"},{default:s((()=>[r(B,{class:"font-13 color-black"},{default:s((()=>[u(f(e.$t("financing.t84")),1)])),_:1})])),_:1}),r(L,{class:"cell-input-box",onClick:a[4]||(a[4]=t=>e.$refs.selectp.open())},{default:s((()=>[!1===I.current?(l(),i(B,{key:0,class:"font-13 color-gray"},{default:s((()=>[u(f(e.$t("financing.t85")),1)])),_:1})):(l(),i(L,{key:1,class:"coin-box"},{default:s((()=>[r(z,{src:I.current.icon,mode:""},null,8,["src"]),r(B,{class:"font-13 font-weight color-black"},{default:s((()=>[u(f(I.current.symbol),1)])),_:1})])),_:1})),r(z,{class:"down-icon",src:`/static/img/tactic/down-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1})])),_:1}),r(L,{class:"row-box"},{default:s((()=>[r(L,{class:"_title"},{default:s((()=>[r(B,{class:"font-13 color-black"},{default:s((()=>[u(f(e.$t("financing.t86")),1)])),_:1}),r(B,{class:"font-13 color-black"},{default:s((()=>[u(f(e.$t("financing.t87"))+" "+f(!1===I.current?"--":e.$util.thousandSeparator(e.$util.str2number(I.current[I.accounts[I.findex].field])))+" "+f(I.current.symbol),1)])),_:1})])),_:1}),r(L,{class:"cell-input-box"},{default:s((()=>[r(R,{modelValue:I.amount,"onUpdate:modelValue":a[5]||(a[5]=t=>I.amount=t),type:"number",class:"color-black font-13",placeholder:e.$t("financing.t88"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"]),r(B,{onClick:a[6]||(a[6]=t=>I.amount=e.$util.str2number(e.$util.float(I.current[I.accounts[I.findex].field]))),class:"font-13 color-primary desc"},{default:s((()=>[u(f(e.$t("financing.t89")),1)])),_:1})])),_:1})])),_:1}),r(L,{class:"tips"},{default:s((()=>[r(B,{class:"font-14 color-black"},{default:s((()=>[u(f(e.$t("financing.t90")),1)])),_:1}),r(B,{class:"font-12 color-gray"},{default:s((()=>[u(f(e.$t("financing.t91")),1)])),_:1})])),_:1}),r(L,{class:"footer"},{default:s((()=>[r(S,{onClick:H.confirm,class:d([{"bg-black":""!=I.amount,"bg-gray":""==I.amount||I.amount<=0},"button"])},{default:s((()=>[r(B,{class:d(["font-13 font-weight",{"color-white":""!=I.amount,"color-gray":""==I.amount||I.amount<=0}])},{default:s((()=>[u(f(e.$t("financing.t92")),1)])),_:1},8,["class"])])),_:1},8,["onClick","class"])])),_:1})])),_:1}),r(V,{ref:"accounts","safe-area":!1,type:"bottom"},{default:s((()=>[r(L,{class:"authPanel"},{default:s((()=>[r(L,{class:"title-box"},{default:s((()=>[r(B,{class:"font-15 font-weight color-black"},{default:s((()=>[u(f(0==I.direction?e.$t("financing.t93"):e.$t("financing.t94")),1)])),_:1}),r(L,{class:"close-icon",onClick:a[7]||(a[7]=t=>e.$refs.accounts.close())},{default:s((()=>[r(T,{name:"close",color:"var(--content-primary)",size:"48"})])),_:1})])),_:1}),r(L,{class:"list"},{default:s((()=>[(l(!0),h(g,null,m(I.accounts,((t,e)=>(l(),i(L,{class:d(["l-cell",{"bg-gray":0==I.direction&&I.findex==e||1==I.direction&&I.tindex==e}]),key:e,onClick:t=>{H.setAccount(e)}},{default:s((()=>[r(B,{class:d(["font-13 font-weight",{"color-primary":I.findex==e||I.tindex==e,"color-black":0==I.direction&&I.tindex==e||1==I.direction&&I.findex==e}])},{default:s((()=>[u(f(t.text),1)])),_:2},1032,["class"])])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1},512),r(V,{ref:"selectp","safe-area":!1,type:"bottom"},{default:s((()=>[r(L,{style:p({height:e.$device.windowHeight+"px"})},{default:s((()=>[r(A,{statusBar:"",isOccupy:"",title:e.$t("financing.t95"),onLeftClick:a[8]||(a[8]=t=>e.$refs.selectp.close()),background:"var(--background-primary)",color:"var(--content-primary)",onInit:H.navInit},{default:s((()=>[r(T,{name:"arrowleft",size:"56",color:"var(--content-primary)"})])),_:1},8,["title","onInit"]),r(L,{style:p({height:e.$device.windowHeight-I.navHeight+"px"})},{default:s((()=>[r(q,{"name-key":"symbol",nameKey:"symbol",dataList:I.coin,showAvatar:!0,field:I.accounts[I.findex]?I.accounts[I.findex]:I.accounts[0],onItemclick:H.itemclick},null,8,["dataList","field","onItemclick"])])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},512),r(E,{ref:"loading"},null,512),r(K,{ref:"alert",title:e.$t("financing.t96"),content:I.content},null,8,["title","content"])])),_:1},8,["data-theme"])}],["__scopeId","data-v-1acdcca2"]]);export{H as default};

import{I as e,O as t,$ as o,l as i,m as l,a,b as s,a2 as n,i as r,a3 as c,a4 as d,n as h,a5 as g,r as f,A as p,v as u,w as m,F as _,t as y,u as v,x as $,z as w,q as k,D as b,y as C,H as x,G as V,W as I,J as j}from"./index-CvJkP8r7.js";import{_ as R}from"./fui-icon.BbrID5X2.js";import{r as T}from"./uni-app.es.4grYzir1.js";import{f as L,_ as U}from"./fui-slider-captcha.B2RbnX2L.js";import{a as z,_ as W}from"./areacode.EoDC2SBo.js";import{_ as A}from"./alert.DkjAnFY_.js";import{_ as F}from"./loading.CdlUmBbP.js";import{_ as S}from"./yw.NxU58hvH.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./fui-nav-bar.CZAK61wT.js";import"./uni-popup.BKNKbknm.js";import"./uni-popup-dialog.jPMVSOx-.js";import"./fui-loading.BOHvl-ks.js";var B;const H=P({components:{[e.name]:e,fuiSliderCaptcha:L,fuiRotateVerify:U},data(){return{login:0,height:"100%",active:0,eye:"visible",itype:"password",onFocus:"",showareacode:"+0",verifyRes:!1,phone:"",email:"",invaiteCode:"",alertTitle:"",content:"",ctxt:this.$t("login.cancel"),ftxt:this.$t("login.confirm"),password:"",src:"",resUrl:"https://res.firstui.cn/static/images",index:0,istatus:!1,wallet:!1}},onLoad(e){e.code&&""!=e.code&&t("invaite-code",e.code)},onReady(){o("getLocal",(e=>{console.log(e)}));var e=i("local-country");if(void 0!==e&&""!=e)for(var t=0;t<z.countryList.length;t++)if(z.countryList[t].code.toLowerCase()===e.toLowerCase()){this.showareacode=z.countryList[t].dialingCode;break}},onShow(){var e=i("invaite-code");void 0!==e&&""!=e&&(this.invaiteCode=e,this.istatus=!0),this.getVerifyImage();const t=i("login_phone");void 0!==t&&""!=t&&(this.phone=t);const o=i("login_email");void 0!==o&&""!=o&&(this.email=o),1===parseInt(this.config.register_type)&&(this.active=1),2===parseInt(this.config.register_type)&&(this.active=0)},computed:{...l(["config"]),...a(["userTheme"])},methods:{...s(["userLogin"]),checkWalletEnv(){(window.tronWeb||window.ethereum)&&(this.wallet=!0)},download(){window.location.href=this.config.download},getVerifyImage(){let e=this.index;e++,e>3&&(e=1),this.index=e,this.src=`${this.resUrl}/component/sc/img_sc_${e}.png`},verifyFail(e){e.times>=3&&this.getVerifyImage()},verifyResult(e){if(console.log(e),e.angle<170||e.angle>200)this.$refs.scRef.fail();else if(this.verifyHide(),0===this.active&&0==this.login&&(n(),r.sendPhoneVerifyCode(this.phone,this.showareacode).then((e=>{c(),200==e.code?(t("invite_code",this.invaiteCode),this.$mroute.authVerify("phone",this.phone,this.showareacode)):(this.alertTitle=this.$t("login.tip_t2"),this.content=e.message,this.$refs.alert.open())}))),1==this.active&&0==this.login&&(n(),r.sendEmailVerifyCode(this.email).then((e=>{c(),200==e.code?(t("invite_code",this.invaiteCode),this.$mroute.authVerify("email",this.email,"")):(this.alertTitle=this.$t("login.tip_t2"),this.content=e.message,this.$refs.alert.open())}))),1==this.login){var o={password:this.password,type:0==this.active?1:2};if(0==this.active){if(""==this.phone)return this.alertTitle=this.$t("login.tip_t2"),this.content=this.$t("login.phone_p"),this.$refs.alert.open(),!1;o.phone=this.phone,o.code=this.showareacode.replace("+",""),t("login_phone",this.phone)}else{if(""==this.email)return this.alertTitle=this.$t("login.tip_t2"),this.content=this.$t("login.email_p"),this.$refs.alert.open(),!1;o.email=this.email,t("login_email",this.email)}if(""==this.password)return this.alertTitle=this.$t("login.tip_t2"),this.content=this.$t("login.pwd_p"),this.$refs.alert.open(),!1;n({title:this.$t("login.load_log")}),r.login(o).then((e=>{console.log(e),c(),B=e.code,200!=e.code?(this.alertTitle=this.$t("login.log_t1"),this.content=e.message,this.$refs.alert.open()):(this.userLogin(e.data),this.ctxt="",this.alertTitle=this.$t("login.log_t1"),this.content=this.$t("login.verify_c2"),this.$refs.alert.open())}))}},alertConfirm(){if(1==this.login&&200===B)return this.$mroute.switchIndex()},googleLogin(){console.log("gogole");var e=this;this.$refs.loading.open(),d({provider:"google",complete(o){"login:ok"===o.errMsg&&uni.getUserInfo({provider:"google",success(i){r.googleLogin(i.userInfo.email,o.authResult.access_token).then((l=>{e.$refs.loading.close(),200===l.code&&void 0===l.data.action?(e.userLogin(l.data),e.login,B=200,e.ctxt="",e.content=e.$t("login.verify_c2"),e.$refs.alert.open()):(t("google-token",o.authResult.access_token),t("google-info",i.userInfo),h({url:"/pages/auth/setpwd/setpwd?a="+i.userInfo.email+"&type=google"}))}))},fail(){e.$refs.loading.close()}})},fail(t){e.$refs.loading.close(),console.log(t)}})},register(){this.$mroute.authVerify("email")},showArea(){this.$refs.areacode.open()},areacode(e){this.showareacode=e.dialingCode},verifyShow(){if(1==this.login&&(""==this.phone&&0==this.active||""==this.email&&1==this.active))return this.alertTitle=this.$t("login.tip_t1"),this.content=this.$t("login.tip_c1"),this.$refs.alert.open(),!1;this.$refs.scRef&&this.$refs.scRef.show()},verifyHide(){this.$refs.scRef&&this.$refs.scRef.closeVerify()},open(){this.$refs.popup.closeVerify()},close(){g()},switchPanel(){},changeInput(){"text"==this.itype?(this.itype="password",this.eye="visible"):(this.itype="text",this.eye="invisible")},sliderChange(e){this.active=e,0==this.active?this.email="":this.phone="",this.password=""}}},[["render",function(e,t,o,i,l,a){const s=T(f("fui-icon"),R),n=x,r=y,c=V,d=I,h=j,g=T(f("fui-rotate-verify"),U),L=T(f("areacode"),W),z=T(f("alert"),A),P=T(f("loading"),F);return v(),p(_,null,[u(r,{class:"login","data-theme":e.userTheme},{default:m((()=>[u(r,{class:"login-body-box"},{default:m((()=>[u(r,{class:"login-top"},{default:m((()=>[u(s,{name:"close",size:"56",color:"var(--text-black)",onClick:t[0]||(t[0]=e=>a.close())}),u(r,{class:"title"},{default:m((()=>[u(n,{class:"color-black font-bold"},{default:m((()=>[$(w(1==l.login?(e.config.site_name?e.config.site_name:"")+" "+e.$t("login.t1"):(e.config.site_name?e.config.site_name:"")+" "+e.$t("login.t2")),1)])),_:1})])),_:1}),u(r,{class:"bg-box"},{default:m((()=>[u(c,{src:S,mode:"widthFix"})])),_:1})])),_:1}),u(r,{class:"login-bottom"},{default:m((()=>[u(r,{class:"switchTab"},{default:m((()=>[0==parseInt(e.config.register_type)||2==parseInt(e.config.register_type)?(v(),k(r,{key:0,class:b(["item",0==l.active?"active":""]),onClick:t[1]||(t[1]=e=>a.sliderChange(0))},{default:m((()=>[u(n,null,{default:m((()=>[$(w(e.$t("login.phone")),1)])),_:1})])),_:1},8,["class"])):C("",!0),0==parseInt(e.config.register_type)||1==parseInt(e.config.register_type)?(v(),k(r,{key:1,class:b(["item",1==l.active?"active":""]),onClick:t[2]||(t[2]=e=>a.sliderChange(1))},{default:m((()=>[u(n,null,{default:m((()=>[$(w(e.$t("login.email")),1)])),_:1})])),_:1},8,["class"])):C("",!0)])),_:1}),u(r,{class:"container-box"},{default:m((()=>[u(r,{class:"item"},{default:m((()=>[0==l.active?(v(),k(n,{key:0,class:"font-13 color-gray"},{default:m((()=>[$(w(e.$t("login.phone")),1)])),_:1})):C("",!0),1==l.active?(v(),k(n,{key:1,class:"font-13 color-gray"},{default:m((()=>[$(w(e.$t("login.email")),1)])),_:1})):C("",!0),0==l.active?(v(),k(r,{key:2,class:"input-box phone-box"},{default:m((()=>[u(r,{class:"area-code",onClick:a.showArea},{default:m((()=>[u(n,{class:"font-14 color-black font-weight"},{default:m((()=>[$(w(l.showareacode),1)])),_:1}),u(c,{class:"down-icon",src:`/static/img/tactic/down-${e.userTheme}.png`,mode:"widthFix"},null,8,["src"])])),_:1},8,["onClick"]),u(d,{class:"font-14 color-black font-weight",modelValue:l.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>l.phone=e),type:"number",placeholder:this.$t("login.phone_p"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})):C("",!0),1==l.active?(v(),k(r,{key:3,class:"input-box"},{default:m((()=>[u(d,{class:"font-14 color-black font-weight",modelValue:l.email,"onUpdate:modelValue":t[4]||(t[4]=e=>l.email=e),type:"text",placeholder:this.$t("login.email_p"),"placeholder-class":"placeholder"},null,8,["modelValue","placeholder"])])),_:1})):C("",!0)])),_:1}),1==l.login?(v(),k(r,{key:0,class:"item"},{default:m((()=>[u(n,{class:"font-13 color-gray"},{default:m((()=>[$(w(e.$t("login.password")),1)])),_:1}),u(r,{class:"input-box"},{default:m((()=>[u(d,{class:"font-14 color-black font-weight",modelValue:l.password,"onUpdate:modelValue":t[5]||(t[5]=e=>l.password=e),placeholder:this.$t("login.pwd_p"),type:l.itype,"placeholder-class":"placeholder"},null,8,["modelValue","placeholder","type"]),u(r,{class:"icon-box",onClick:a.changeInput},{default:m((()=>[u(s,{name:l.eye,size:"40",color:"var(--dark-gray)"},null,8,["name","color"])])),_:1},8,["onClick"])])),_:1})])),_:1})):C("",!0),0==l.login?(v(),k(r,{key:1,class:"item"},{default:m((()=>[u(n,{class:"font-13 color-gray"},{default:m((()=>[$(w(e.$t("login.invite")),1)])),_:1}),u(r,{class:"input-box"},{default:m((()=>[u(d,{class:"font-14 color-black font-weight",modelValue:l.invaiteCode,"onUpdate:modelValue":t[6]||(t[6]=e=>l.invaiteCode=e),disabled:l.istatus,placeholder:this.$t("login.inputInviteCode"),type:"text","placeholder-class":"placeholder"},null,8,["modelValue","disabled","placeholder"]),u(r,{class:"icon-box",onClick:a.changeInput},{default:m((()=>[u(s,{name:l.eye,size:"40",color:"var(--dark-gray)"},null,8,["name","color"])])),_:1},8,["onClick"])])),_:1})])),_:1})):C("",!0),u(r,{class:"button"},{default:m((()=>[u(h,{disabled:""==l.phone&&""==l.email,class:b({"active-btn":""!=l.phone||""!=l.email}),onClick:a.verifyShow},{default:m((()=>[$(w(1==l.login?this.$t("login.login_t"):this.$t("login.register")),1)])),_:1},8,["disabled","class","onClick"])])),_:1}),1==l.login?(v(),k(r,{key:2,class:"cell"},{default:m((()=>[u(n,{class:"font-13 font-weight color-primary",onClick:t[7]||(t[7]=e=>l.login=0)},{default:m((()=>[$(w(e.$t("login.reg_t")),1)])),_:1}),u(n,{class:"font-13 color-black",onClick:t[8]||(t[8]=t=>e.$mroute.forgetpwd())},{default:m((()=>[$(w(e.$t("login.forget_t")),1)])),_:1})])),_:1})):C("",!0),1!=l.login?(v(),k(r,{key:3,class:"cell log-cell"},{default:m((()=>[u(n,{class:"font-13 font-weight color-primary",onClick:t[9]||(t[9]=e=>l.login=1)},{default:m((()=>[$(w(e.$t("login.log_t")),1)])),_:1})])),_:1})):C("",!0)])),_:1})])),_:1})])),_:1}),u(r,{class:"con-footer"},{default:m((()=>[l.wallet?(v(),k(r,{key:0,class:"download-box"},{default:m((()=>[u(n,{class:"font-18 font-weight",style:{"font-size":"28rpx !important"}},{default:m((()=>[$(w(e.$t("login.txt23"))+" ",1),u(n,{onClick:e.loginWallet,style:{"font-size":"28rpx !important"}},{default:m((()=>[$("Wallet Web")])),_:1},8,["onClick"]),$(" "+w(e.$t("login.txt24")),1)])),_:1})])),_:1})):C("",!0),u(r,{class:"download-box"},{default:m((()=>[u(n,null,{default:m((()=>[$(w(e.$t("login.downlod_t"))+" ",1),u(n,{onClick:a.download},{default:m((()=>[$(w(e.config.site_name)+" APP",1)])),_:1},8,["onClick"]),$(" "+w(e.$t("login.downlod_t1")),1)])),_:1})])),_:1}),1!=l.login?(v(),k(r,{key:1,class:"download-box"},{default:m((()=>[u(n,null,{default:m((()=>[$(w(e.$t("login.reg_statement"))+" ",1),u(n,{onClick:t[10]||(t[10]=t=>e.$mroute.webview(1,"yhxy",e.$t("login.agr_t")))},{default:m((()=>[$("《"+w(e.$t("login.agr_t"))+"》",1)])),_:1}),$(" "+w(e.$t("login.and"))+" ",1),u(n,{onClick:t[11]||(t[11]=t=>e.$mroute.webview(1,"ysxy",e.$t("login.privacy_t")))},{default:m((()=>[$("《"+w(e.$t("login.privacy_t"))+"》 ",1)])),_:1})])),_:1})])),_:1})):C("",!0)])),_:1}),u(g,{background:"var(--background-primary)",ref:"scRef",title:e.$t("login.t11"),color:"var(--content-tertiary)",descrColor:"var(--content-primary)",sliderBgColor:"var(--background-dark)",slideColor:"var(--content-tertiary)",borderColor:"var(--background-secondary-100)",passColor:"var(--color-primary)",failColor:"var(--content-trade-sell)",closeColor:"var(--content-primary)",maskBgColor:"rgba(0, 0, 0, .8)",desc:e.$t("login.t22"),src:"/static/verify.jpeg",onVerify:a.verifyResult},null,8,["title","desc","onVerify"])])),_:1},8,["data-theme"]),u(L,{ref:"areacode",onItemclick:a.areacode},null,8,["onItemclick"]),u(z,{ref:"alert",ctxt:l.ctxt,ftxt:l.ftxt,title:l.alertTitle,onConfirm:t[12]||(t[12]=e=>a.alertConfirm()),content:l.content},null,8,["ctxt","ftxt","title","content"]),u(P,{ref:"loading"},null,512)],64)}],["__scopeId","data-v-e74ba27f"]]);export{H as default};
